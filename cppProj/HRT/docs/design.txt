-- Assumption: each packet has a single seq num but can contain 5.5 messages or half a message for example. Messages aren't associated with seq num.

The warehouse -- I use a deque indexed by the seq num to hold unprocessed packets, usually received too early.

I use two variables to mark the lowest and highest seq num in the warehouse. In this container, All elements before the lowest are subject to removal from the container, so as to free up memory.

To deal with a partial message received-but-unprocessed, I copy it to a tiny global buffer (33 bytes). Normally this buffer is empty. When not empty, it would contain a single received-but-unprocessed partial message. In such a situation, We would wait for the second half of this message, contained in the next expected packet. Meanwhile, any unexpected i.e. out-of-sequence packets must be warehoused i.e. copied to an array on heap and saved in the warehouse container.
